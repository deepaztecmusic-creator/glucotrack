
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GlucoTrack">
    <meta name="theme-color" content="#0D1321">
    <title>GlucoTrack</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
        :root{
            --bg:#F4F6F9;--white:#fff;--border:#E2E6ED;--border2:#C8CDD8;
            --text:#0D1321;--t2:#5A6478;--t3:#9AA3B5;
            --low:#E53E3E;--low-bg:#FFF5F5;--low-b:#FEB2B2;
            --ok:#38A169;--ok-bg:#F0FFF4;--ok-b:#9AE6B4;
            --hi:#D97706;--hi-bg:#FFFBEB;--hi-b:#FCD34D;
            --vhi:#E53E3E;--acc:#1A56DB;--acc-bg:#EBF5FF;--acc-b:#93C5FD;
            --pur:#7C3AED;--pur-bg:#F5F3FF;
            --sh:0 1px 3px rgba(0,0,0,.06),0 1px 2px rgba(0,0,0,.04);
            --sh2:0 4px 16px rgba(0,0,0,.09);
            --r:14px;--rs:8px;
        }
        body.dark{
            --bg:#0D1321;--white:#1a2236;--border:#243049;--border2:#2d3d57;
            --text:#e8edf5;--t2:#8899bb;--t3:#4a5a7a;
            --low-bg:#2d1515;--low-b:#7f2020;
            --ok-bg:#0d2a1a;--ok-b:#1a5c30;
            --hi-bg:#2a1f08;--hi-b:#7a4f0a;
            --acc-bg:#0d1e3d;--acc-b:#1a3a6b;
            --pur-bg:#1a0d35;
            --sh:0 1px 3px rgba(0,0,0,.3),0 1px 2px rgba(0,0,0,.2);
            --sh2:0 4px 16px rgba(0,0,0,.4);
        }
        html{height:100%;background:var(--bg);}
        body{height:100%;overflow:hidden;font-family:'Plus Jakarta Sans',sans-serif;background:var(--bg);color:var(--text);max-width:430px;margin:0 auto;display:flex;flex-direction:column;}

        /* --- TOAST --- */
        .toast-wrap{position:fixed;top:16px;left:50%;transform:translateX(-50%);z-index:9999;display:flex;flex-direction:column;gap:8px;width:calc(100% - 32px);max-width:390px;}
        .toast{background:var(--text);color:#fff;padding:12px 16px;border-radius:10px;font-size:13px;font-weight:600;display:flex;align-items:center;gap:10px;box-shadow:var(--sh2);animation:toastIn .3s cubic-bezier(.34,1.56,.64,1) forwards;}
        @keyframes toastIn{from{opacity:0;transform:translateY(-12px)}to{opacity:1;transform:translateY(0)}}

        /* --- UI COMPONENTS --- */
        .topbar{background:var(--white);padding:12px 16px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border);z-index:210;}
        .logo{font-size:18px;font-weight:800;color:var(--acc);}
        .logo span{color:var(--text);}
        
        .wbar{background:#0D1321;padding:12px 16px;color:white;position:relative;}
        .wnum{font-size:32px;font-weight:700;color:#34d399;font-family:'JetBrains Mono';}
        
        .scroll{flex:1;overflow-y:auto;padding-bottom:100px;}
        .card{margin:12px 14px;background:var(--white);border:1px solid var(--border);border-radius:var(--r);padding:16px;box-shadow:var(--sh);}
        
        .fab{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:var(--acc);color:white;padding:14px 28px;border-radius:50px;font-weight:700;border:none;box-shadow:0 8px 20px rgba(26,86,219,0.3);cursor:pointer;z-index:100;}

        /* --- DRAWER --- */
        .dov{position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:190;display:none;}
        .drawer{position:fixed;top:0;left:-280px;width:280px;height:100%;background:var(--white);z-index:200;transition:0.3s;padding:20px;}
        .drawer.open{left:0;}
        .dov.open{display:block;}
        .di{padding:12px;margin:4px 0;border-radius:8px;cursor:pointer;font-weight:600;color:var(--t2);}
        .di.active{background:var(--acc-bg);color:var(--acc);}

        /* --- CHART --- */
        .chart-wrap{height:200px;width:100%;}
        
        /* --- ALARM/SETTING INPUTS --- */
        .alarm-input{width:64px;padding:5px;background:var(--bg);border:1.5px solid var(--border);border-radius:7px;font-family:'JetBrains Mono';font-size:14px;font-weight:700;text-align:center;color:var(--text);}
        
        /* --- MODAL --- */
        .mbd{position:fixed;inset:0;background:rgba(0,0,0,0.45);z-index:400;display:none;align-items:flex-end;}
        .mbd.open{display:flex;}
        .msheet{width:100%;background:var(--white);border-radius:20px 20px 0 0;padding:20px;transform:translateY(0);animation:slideUp 0.3s;}
        @keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
        
        .bi{font-size:48px;width:100%;text-align:center;border:none;background:none;font-family:'JetBrains Mono';color:var(--text);outline:none;}
    </style>
</head>
<body class="">

    <div class="toast-wrap" id="toastWrap"></div>
    <div class="dov" id="overlay" onclick="toggleDrawer()"></div>

    <div class="drawer" id="drawer">
        <h2 style="margin-bottom:20px">Menu</h2>
        <div class="di active" onclick="showScreen('home')">Dashboard</div>
        <div class="di" onclick="showScreen('history')">History</div>
        <div class="di" onclick="toggleTheme()">Toggle Dark Mode</div>
    </div>

    <nav class="topbar">
        <div class="logo">Gluco<span>Track</span></div>
        <button onclick="toggleDrawer()" style="background:none;border:none;font-size:20px;cursor:pointer">☰</button>
    </nav>

    <div class="wbar">
        <div style="font-size:11px;opacity:0.7">CURRENT GLUCOSE</div>
        <div class="wnum" id="currentVal">98 <span style="font-size:14px">mg/dL</span></div>
    </div>

    <main class="scroll">
        <section id="home" class="screen active">
            <div class="card">
                <div style="display:flex;justify-content:space-between;margin-bottom:15px">
                    <span style="font-weight:700;font-size:13px">24H TREND</span>
                </div>
                <div class="chart-wrap">
                    <canvas id="mainChart"></canvas>
                </div>
            </div>

            <div class="card">
                <div style="display:flex;gap:10px">
                    <div style="flex:1">
                        <div style="font-size:10px;color:var(--t3)">AVG GLUCOSE</div>
                        <div style="font-size:20px;font-weight:800">112</div>
                    </div>
                    <div style="flex:1">
                        <div style="font-size:10px;color:var(--t3)">TIME IN RANGE</div>
                        <div style="font-size:20px;font-weight:800;color:var(--ok)">94%</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="history" class="screen" style="display:none; padding:16px;">
            <h3>Activity Log</h3>
            <div id="historyList" style="margin-top:15px"></div>
        </section>
    </main>

    <button class="fab" onclick="openLog()">+ LOG GLUCOSE</button>

    <div class="mbd" id="logModal">
        <div class="msheet">
            <div style="display:flex;justify-content:space-between;margin-bottom:20px">
                <span style="font-weight:800">New Entry</span>
                <button onclick="closeLog()" style="border:none;background:none;font-size:20px">✕</button>
            </div>
            <input type="number" class="bi" id="glucoseInput" placeholder="000">
            <div style="text-align:center;color:var(--t3);margin-bottom:20px">mg/dL</div>
            <button onclick="saveEntry()" style="width:100%;padding:15px;background:var(--acc);color:white;border:none;border-radius:12px;font-weight:700">SAVE READING</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        let entries = JSON.parse(localStorage.getItem('gluco_data')) || [];

        function toggleDrawer() {
            document.getElementById('drawer').classList.toggle('open');
            document.getElementById('overlay').classList.toggle('open');
        }

        function toggleTheme() {
            document.body.classList.toggle('dark');
            const isDark = document.body.classList.contains('dark');
            localStorage.setItem('gluco_theme', isDark ? 'dark' : 'light');
            showToast(isDark ? "Dark mode on" : "Light mode on");
        }

        function showScreen(id) {
            document.querySelectorAll('section').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'block';
            toggleDrawer();
        }

        function openLog() { document.getElementById('logModal').classList.add('open'); }
        function closeLog() { document.getElementById('logModal').classList.remove('open'); }

        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'toast';
            t.innerText = msg;
            document.getElementById('toastWrap').appendChild(t);
            setTimeout(() => t.remove(), 3000);
        }

        function saveEntry() {
            const val = document.getElementById('glucoseInput').value;
            if(!val) return;
            
            const entry = { val: parseInt(val), time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) };
            entries.unshift(entry);
            localStorage.setItem('gluco_data', JSON.stringify(entries));
            
            document.getElementById('currentVal').innerHTML = `${val} <span style="font-size:14px">mg/dL</span>`;
            showToast("Reading saved!");
            closeLog();
            document.getElementById('glucoseInput').value = '';
        }

        // --- CHART INIT ---
        const ctx = document.getElementById('mainChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['6am', '9am', '12pm', '3pm', '6pm', '9pm', '12am'],
                datasets: [{
                    data: [95, 105, 140, 115, 110, 130, 98],
                    borderColor: '#1A56DB',
                    tension: 0.4,
                    fill: true,
                    backgroundColor: 'rgba(26, 86, 219, 0.05)',
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { 
                    x: { grid: { display: false } },
                    y: { min: 40, max: 200, grid: { color: 'rgba(0,0,0,0.05)' } }
                }
            }
        });

        // Load theme
        if(localStorage.getItem('gluco_theme') === 'dark') document.body.classList.add('dark');
    </script>
</body>
</html>
