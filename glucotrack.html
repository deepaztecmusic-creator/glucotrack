<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>GlucoTrack Settings</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #F4F6F9; --white: #fff; --text: #0D1321;
            --border: #E2E6ED; --acc: #1A56DB; --t3: #9AA3B5;
            --low: #E53E3E; --ok: #38A169; --hi: #D97706;
        }
        body.dark {
            --bg: #0D1321; --white: #1A2236; --text: #E8EDF5;
            --border: #243049; --acc: #3B82F6;
        }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; transition: background 0.3s; }
        .card { background: var(--white); border-radius: 16px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); border: 1px solid var(--border); max-width: 400px; margin: 0 auto 15px; }
        h2 { font-size: 18px; margin-bottom: 20px; font-weight: 800; }
        
        .setting-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border); }
        .setting-item:last-child { border-bottom: none; }
        
        .label-grp div { font-size: 14px; font-weight: 600; }
        .label-grp span { font-size: 11px; color: var(--t3); }

        input[type="number"] { width: 60px; padding: 8px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg); color: var(--text); text-align: center; font-family: 'JetBrains Mono'; }
        
        .toggle { width: 44px; height: 24px; background: #CBD5E0; border-radius: 12px; position: relative; cursor: pointer; transition: 0.3s; }
        .toggle.active { background: var(--acc); }
        .toggle::after { content: ''; position: absolute; width: 18px; height: 18px; background: white; border-radius: 50%; top: 3px; left: 3px; transition: 0.3s; }
        .toggle.active::after { left: 23px; }

        .btn-danger { width: 100%; padding: 12px; background: #FFF5F5; color: var(--low); border: 1px solid #FEB2B2; border-radius: 10px; font-weight: 700; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body id="body">

    <div class="card">
        <h2>Appearance</h2>
        <div class="setting-item">
            <div class="label-grp">
                <div>Dark Mode</div>
                <span>Easier on the eyes at night</span>
            </div>
            <div id="darkToggle" class="toggle"></div>
        </div>
    </div>

    <div class="card">
        <h2>Target Range (mmol/L)</h2>
        <div class="setting-item">
            <div class="label-grp">
                <div>Lower Limit</div>
                <span>Threshold for Hypoglycemia</span>
            </div>
            <input type="number" id="lowLimit" value="3.9" step="0.1">
        </div>
        <div class="setting-item">
            <div class="label-grp">
                <div>Upper Limit</div>
                <span>Threshold for Hyperglycemia</span>
            </div>
            <input type="number" id="hiLimit" value="10.0" step="0.1">
        </div>
    </div>

    <div class="card">
        <h2>Data Management</h2>
        <button class="btn-danger" onclick="clearData()">Clear All Records</button>
    </div>

    <script>
        // Load Saved Settings
        const settings = JSON.parse(localStorage.getItem('glucoSettings')) || {
            dark: false,
            low: 3.9,
            hi: 10.0
        };

        const darkToggle = document.getElementById('darkToggle');
        const body = document.getElementById('body');

        function applySettings() {
            if (settings.dark) {
                body.classList.add('dark');
                darkToggle.classList.add('active');
            } else {
                body.classList.remove('dark');
                darkToggle.classList.remove('active');
            }
            document.getElementById('lowLimit').value = settings.low;
            document.getElementById('hiLimit').value = settings.hi;
        }

        darkToggle.onclick = () => {
            settings.dark = !settings.dark;
            save();
            applySettings();
        };

        document.querySelectorAll('input').forEach(input => {
            input.onchange = (e) => {
                settings[e.target.id === 'lowLimit' ? 'low' : 'hi'] = parseFloat(e.target.value);
                save();
            };
        });

        function save() {
            localStorage.setItem('glucoSettings', JSON.stringify(settings));
        }

        function clearData() {
            if(confirm("Are you sure? This will delete all glucose history.")) {
                localStorage.removeItem('glucoData');
                alert("History cleared.");
            }
        }

        applySettings();
    </script>
</body>
</html>
